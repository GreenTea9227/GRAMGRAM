# 2Week_SeoYoHan.md

## Title: [2Week] 서요한

### 미션 요구사항 분석 & 체크리스트

### 2주차 미션 요약

#### 필수

> [v] 인스타 아이디 등록시 중복이 없게 만들기
>
>[v] 인스타 아이디 등록시 10명이 넘지 않도록 만들기
>
>[v] 만약 기존의 등록한 아이디라면 성향만 바꾸게 만들기

#### 선택

> [v] 네이버 로그인 구현
---

#### 추가

> [v] 메일 서비스 도입
>
> [v] 비밀번호 변경 구현


**[접근 방법]**

체크리스트를 중심으로 각각의 기능을 구현하기 위해 어떤 생각을 했는지 정리합니다.

1. 인스타 아이디를 등록 할 경우 중복이 있으면 안되는 것을 확인
2. 인스타 아이디를 등록할 경우 몇명이 등록하였는지를 체크

- 이 때 10명이 넘어간다면 등록을 못하게 막는다.

3. 기존의 등록한 아이디의 경우 성향이 바뀔 경우에만 변경되게 만들기
4. 네이버 로그인 구현시 id를 substring으로 자르기보다는 기존의 값(attributes)들을 활용하여 구현하기

## 문제점 및 해결 방법

#### [필수 미션]

1. **등록이 되어있지 않은 인스타 아이디에 대하여 호감 표시를 하는 경우 등록이 되는 경우가 있음을 발견**

    - 등록된 인스타 아이디만 등록이 되도록 변경


2. **위 요구사항 순서대로 로직을 구현 시 기존의 등록한 아이디의 성향을 바꾸는 경우 로직이 복잡해짐**

    - 로직 구현 순서 변경


3. **구현을 완료하고 보니 메소드가 매우 비대해짐**

    - 메소드를 분리


4. **테스트 코드 작성시 기존 값을 이용하면 헷갈리는 경우가 있음(연관관계를 한눈에 파악이 힘듬)**

    - 새로 데이터를 만들어서 테스트

#### [선택 미션]

1. **네이버 로그인 시 값이 getName을 하게 되면 String 형태로 뭉쳐서 오게 됨**

    - 네이버만을 따로 구분해서 구현하기에는 다른 값들이 불필요하게 검증과정을 거치게 됨
    - substring으로 구현하는 방법도 있지만 attributes에 이미 값이 들어 있기 때문에 attributes를 활용
    - 기존 로직과는 달리 oauthuser를 직접 보내서 처리하게 함
    - 구현 순서를 보면 먼저 factory를 통해 user를 만들고 나서 보내고 있는데 이럴 경우 권한을 따로 구현해줘야 해서 oauth로 로그인을 하게 되면 Role을 user로 통일

**[특이사항]**

구현 과정에서 아쉬웠던 점 / 궁금했던 점을 정리합니다.

#### [아쉬운점 및 향후 보완이 필요 한 점]

> 1. insta add시 로직 순서때문에 고민이 많았다. 내가 생각하지 못한 방법이 있을 것 같다.
>2. insta add시 너무 많은 로직이 들어가 있다. 이것을 분리할 필요가 있다.
>3. 메소드를 재활용하기가 쉽지가 않다. 메소드 재활용을 위해서는 매개변수를 변경할 필요가 있다.
>4. 쿼리가 생각이상으로 많이 실행되고 있다. 이것을 줄일 필요가 있다.
>5. 네이버 로그인의 경우 getName이 혼자 달라 id구현시 다른 클래스들도 많은 변경이 필요하였다. 더 다듬어서 다른 클래스들은 변경하지 않게 보완을 해야 좋을 것 같다.
>6. 지금은 attributes 속성을 사용하지 않고 있지만 향후에 사용하도록 조정을 해야 한다. 


