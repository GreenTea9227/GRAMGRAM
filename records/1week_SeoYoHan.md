# 1Week_서요한.md

## Title: [1Week] 서요한

### 미션 요구사항 분석 & 체크리스트

---

### 분석

**필수**

- likeable delete를 구현 하기

> 삭제를 할 경우 이미 list view에서 해당 entity의 id가 넘어온다.
> 권한 확인은 rq를 통해 이뤄진다.

**선택**

- 구글 로그인 구현하기

> 실제 구글에서 받아와서 데이터로 저장하는 값은 id말고는 없다.
> form login방식과 oauth 방식이 존재하고 있다.

### N주차 미션 요약

[x] likealbe delete구현하기

[x] google login 구현하기
 
---

**[접근 방법]**

### likeable delete 구현

- 현재 접속 유저가 insta를 등록하였는지를 확인

- 삭제를 요청한 객체가 존재하는지 확인

- 현재 접속 유저가 해당 entity를 삭제할 권한이 있는지 확인

### oauth2 user 구분을 위한 별도의 객체 생성

- security user를 위한 공통 인터페이스 제작

- 각 로그인 방법에 따라 구분하기 위해 각각의 로그인 객체 생성(form login방식과 oauth2 login방식 양쪽에 적용)

- 생성 방법을 팩토리 패턴으로 구현

## 테스트 코드와 실제 sql을 통해 위 과정들을 체크

- **delete**

  ```
    - 권한이 없는 유저가 요청 할 때 실패를 하여야 한다.
    
    - 권한이 있는 유저가 해당 객체에 권한이 없는 경우 실패 하여야 한다.
    
    - 권한이 있으며 해당 객체에 권한이 있는 경우 성공하여야 한다.
   ```

- **oauth2 login**

   ```
    - 구글 로그인시 해당 아이디는 GOOGLE이라는 단어로 시작하여야 한다.
    
    - 실제 sql에서 insert문이 나가는지 확인한다.
    
    - 카카오로 로그인시 해당 아이디는 KAKAO라는 단어로 시작하여야 한다.
   ```

- **그 외 리팩토링**

 ```
    - 공통 속성인 createdTime, modifedTime을 따로 객체로 분리하여 구현
  
    - batchsize를 설정
  
    - controller내에 있던 static class를 별도의 패키지로 옮김
```

**[특이사항]**

구현 과정에서 아쉬웠던 점 / 궁금했던 점을 정리합니다.

- 추후 리팩토링 시, 어떤 부분을 추가적으로 진행하고 싶은지에 대해 구체적으로 작성해주시기 바랍니다.

**아쉬운 점**

- 테스트 코드가 충분치 않아 구조를 변경 할 시에 어떠한 side effect가 발생할지를 확인하기가 쉽지가 않다. 그래서 많은 부분을 단시간안에 고치기가 쉽지 않았다.

**추가할 점**

- 현재 테이블의 개수가 적어 fetch를 Eager로 나두었지만 향후 테이블이 늘어난다면 성능의 문제가 발생할 수 있으므로 lazy로 변경하기

- Result-code를 경우에 따라 설정하여 enum타입으로 구현하기

- 현재 객체를 view까지 전달하고 있는데 dto객체를 생성해서 대신 전달

- security의 경우 많은 곳이 메소드 방식으로 접근을 제한하고 있는데 이 과정을 url로 변경하기

**참고: [Refactoring]**

    - Refactoring 시 주로 다루어야 할 이슈들에 대해 리스팅합니다.
    - 1차 리팩토링은 기능 개발을 종료한 후, 스스로 코드를 다시 천천히 읽어보면서 진행합니다.
    - 2차 리팩토링은 피어리뷰를 통해 전달받은 다양한 의견과 피드백을 조율하여 진행합니다.
